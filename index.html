<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tautulli Map Viewer - Visualisation en temps r√©el</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin=""/>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Header -->
    <header>
        <h1>Tautulli Map Viewer</h1>
        <div class="status-bar">
            <span id="connection-status" class="status-indicator">D√©connect√©</span>
            <span id="last-update">Derni√®re mise √† jour: --:--</span>
            <span id="user-count">Utilisateurs actifs: 0</span>
        </div>
        <nav class="tab-navigation">
            <button class="tab-button active" data-tab="live">
                <span class="tab-icon">üì°</span> En Direct
            </button>
            <button class="tab-button" data-tab="history">
                <span class="tab-icon">üìä</span> Historique (10 jours)
            </button>
        </nav>
    </header>

    <!-- History Controls -->
    <div id="history-controls" class="history-controls">
        <div class="date-range-selector">
            <label>P√©riode affich√©e :</label>
            <div class="date-inputs">
                <input type="datetime-local" id="start-date" />
                <span>√†</span>
                <input type="datetime-local" id="end-date" />
            </div>
            <button id="apply-date-range" class="apply-button">Appliquer</button>
            <button id="preset-24h" class="preset-button">24h</button>
            <button id="preset-7d" class="preset-button">7 jours</button>
            <button id="preset-10d" class="preset-button active">10 jours</button>
        </div>
        <div class="playback-controls">
            <button id="play-pause" class="playback-button">‚ñ∂Ô∏è Lecture</button>
            <input type="range" id="playback-slider" min="0" max="100" value="0" />
            <span id="playback-time">--:--</span>
        </div>
    </div>

    <!-- Map Container -->
    <div id="map-container">
        <div id="map"></div>
    </div>

    <!-- Info Panel -->
    <div id="info-panel">
        <h2>Statistiques</h2>
        <div id="total-bandwidth">Bande passante totale: 0 Mbps</div>
        <div id="active-streams">Streams actifs: 0</div>
        <ul id="user-list"></ul>
    </div>

    <!-- Configuration Modal -->
    <div id="config-modal" class="modal">
        <div class="modal-content">
            <h2>Configuration Tautulli</h2>
            <form id="config-form">
                <label for="tautulli-url">URL Tautulli:</label>
                <input type="url" id="tautulli-url" placeholder="http://localhost:8181" required>
                
                <label for="api-key">Cl√© API:</label>
                <input type="text" id="api-key" placeholder="Votre cl√© API Tautulli" required>
                
                <label for="server-lat">Latitude du serveur:</label>
                <input type="number" id="server-lat" step="0.000001" placeholder="48.856614" required>
                
                <label for="server-lon">Longitude du serveur:</label>
                <input type="number" id="server-lon" step="0.000001" placeholder="2.352222" required>
                
                <label for="refresh-interval">Intervalle de rafra√Æchissement (secondes):</label>
                <input type="number" id="refresh-interval" min="5" max="300" value="30" required>
                
                <button type="submit">Sauvegarder</button>
            </form>
        </div>
    </div>

    <!-- Settings Button -->
    <button id="settings-btn" class="settings-button">‚öôÔ∏è</button>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>
    
    <!-- Custom JS -->
    <script src="js/config.js"></script>
    <script src="js/tautulli-api.js"></script>
    <script src="js/map-manager.js"></script>
    <script src="js/app.js"></script>
</body>
</html>